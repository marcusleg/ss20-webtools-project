(this["webpackJsonpss20-webtools-project"]=this["webpackJsonpss20-webtools-project"]||[]).push([[0],{74:function(e,t,a){e.exports=a(85)},79:function(e,t,a){},80:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),o=(a(79),a(11)),i=(a(80),a(96)),s=a(58),u=a(13),m=a.n(u),d=a(101),h=a(90),p={About:{title:"About",text:"This text explains the purpose of this website."},AdjustedData:{title:"Component",shortText:"This is what the data looks like after reducing from two to one dimension",longText:"Lorem ipsum dolor sit amet. AdjustedData longText. TODO"},EigenvaluesChart:{title:"Eigenvalues",shortText:"The eigenvalues indicate the significance of the components relative to each other.",longText:"Lorem ipsum dolor sit amet. EigenvaluesChart longText. TODO"},ScatterPlot:{title:"Scatter plot with component vectors",shortText:r.a.createElement(r.a.Fragment,null,"Example using ",r.a.createElement("u",null,"HTML"),". Although technically this is RSX."),longText:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Lorem ipsum dolor sit amet. ScatterPlot longText. ",r.a.createElement("strong",null,"Bold text"),"."),r.a.createElement("a",{href:"https://reactjs.org/docs/introducing-jsx.html"},"Learn more about RSX"),r.a.createElement("br",null),"The following image is embedded using a Bootstrap tag.",r.a.createElement("br",null),r.a.createElement(h.a,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/GaussianScatterPCA.svg/500px-GaussianScatterPCA.svg.png",fluid:!0}))}},E=function(){return r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"About"),r.a.createElement(d.a.Body,null,p.About.text))},g=a(91),f=a(99),b=a(92),x=function(e){var t=e.data,a=e.setData,l=e.setHighlightedComponent,c=e.setHighlightedIndex,i=Object(n.useState)(null),s=Object(o.a)(i,2),u=s[0],h=s[1];return r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Menu"),r.a.createElement(d.a.Body,null,r.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){for(var e=[],t=0;t<20;t++)e=e.concat([[200*Math.random()-100,200*Math.random()-100]]);a(e)}},"Generate random data"),r.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){return a([]),l(null),void c(null)}},"Clear data"),t.length>0?r.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){return a(m.a.computeDeviationMatrix(t))}},"Center Data"):r.a.createElement(g.a,{variant:"secondary",block:!0,disabled:!0},"Center Data"),r.a.createElement(g.a,{variant:"secondary",block:!0,href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t))),download:"data.json"},"Export data"),r.a.createElement(f.a,null,r.a.createElement(f.a.File,{label:"Import JSON file",custom:!0,onChange:function(e){e.preventDefault();var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){try{var t=JSON.parse(e.target.result);a(t)}catch(n){h("Unable to parse as JSON file"),setTimeout((function(){return h(null)}),5e3)}},n.readAsText(t)}}})),u?r.a.createElement(b.a,{variant:"danger"},u):""))},v=a(12),y=a(94),j=a(6),C=function(e){switch(e){case 0:return"#ff9e1b";case 1:return"#c4d52a";case 2:return"#7c8034";default:return"#cccccc"}},O=a(100),k=a(93),A=a(98),D=function(e){var t=e.title,a=e.shorttext,l=e.longtext,c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],u=i[1],m=function(){return u(!1)};return r.a.createElement("div",{className:"float-right"},r.a.createElement(O.a,{placement:"left",overlay:r.a.createElement(k.a,{id:"tooltip-left"},r.a.createElement("p",null,a),r.a.createElement("strong",null,"Click to learn more."))},r.a.createElement("h5",null,r.a.createElement(g.a,{variant:"info",size:"sm",onClick:function(){return u(!0)}},"Help"))),r.a.createElement(A.a,{show:s,onHide:m},r.a.createElement(A.a.Header,{closeButton:!0},r.a.createElement(A.a.Title,null,t)),r.a.createElement(A.a.Body,null,l),r.a.createElement(A.a.Footer,null,r.a.createElement(g.a,{variant:"secondary",onClick:m},"Close"))))},S=function(e){var t=e.data,a=e.principalComponents,l=e.setHighlightedComponent,c=e.highlightedIndex,o=e.setHighlightedIndex,i=e.n,s=Object(n.useRef)();Object(n.useEffect)((function(){var e,n=Object(j.i)(s.current);try{e=m.a.computeAdjustedData(t,a[Number(i)-1]).adjustedData[0]}catch(h){return void console.error("Handled exception in 3rd party library")}var r=Math.min.apply(Math,Object(v.a)(m.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(v.a)(m.a.computeAdjustedData(t,a[1]).adjustedData[0]))),l=Math.max.apply(Math,Object(v.a)(m.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(v.a)(m.a.computeAdjustedData(t,a[1]).adjustedData[0]))),u=Object(j.h)().domain([r,l]).range([0,315]).nice().clamp(!0),d=Object(j.a)(u);n.select(".x-axis").style("transform","translateY(".concat(62.5,"px)")).transition().call(d),n.selectAll(".dataPoint").data(e).join("circle").attr("class","dataPoint").attr("r",(function(e,t){return t===c?5:3})).attr("cy",62.5).style("fill",(function(e,t){return t===c?"red":"black"})).transition().attr("cx",(function(e){return u(e)})),n.selectAll(".dataPoint").on("mouseenter",(function(e,t){o(t)})).on("mouseleave",(function(){o(null)}))}),[t,a,i,c,o]);var u=t.length>1?m.a.computePercentageExplained(a,a[Number(i)-1]):0,h={textDecoration:"underline",textDecorationColor:C(Number(i-1)),textDecorationThickness:".15em"};return r.a.createElement("div",{onMouseEnter:function(){return l(i)},onMouseLeave:function(){return l(null)}},r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3",style:h},"Component ",i),r.a.createElement(d.a.Body,null,r.a.createElement(y.a,{aspectRatio:"21by9"},r.a.createElement("svg",{ref:s,width:315,height:135,viewBox:"0 0 ".concat(315," ").concat(165)},r.a.createElement("rect",{x:"0",y:"0",width:315,height:135,fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}))),"Explains ",Number(100*u).toFixed(0)," % of the variance.",r.a.createElement(D,{title:p.AdjustedData.title,shorttext:p.AdjustedData.shortText,longtext:p.AdjustedData.longText}))))},w=a(95),T=function(e){var t=e.data,a=e.setData,n=e.highlightedIndex,l=e.setHighlightedIndex,c=function(e){return function(n){n.preventDefault(),a(t.filter((function(t,a){return e!==a})))}};return r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Data"),r.a.createElement(d.a.Body,null,r.a.createElement(w.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"X"),r.a.createElement("th",null,"Y"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.sort().map((function(e,t){return r.a.createElement("tr",{key:t,style:t===n?{color:"red"}:{},onMouseEnter:function(){return l(t)},onMouseLeave:function(){return l(null)}},r.a.createElement("td",null,Number.parseFloat(e[0]).toFixed(2)),r.a.createElement("td",null,Number.parseFloat(e[1]).toFixed(2)),r.a.createElement("td",null,r.a.createElement(g.a,{variant:"link",size:"sm",onClick:c(t)},"[X]")))})))),r.a.createElement("h5",null,"Add data point"),r.a.createElement(f.a,{onSubmit:function(e){e.preventDefault();var n=Number(e.target.x.value),r=Number(e.target.y.value);a(t.concat([[n,r]])),e.target.x.value="",e.target.y.value=""}},r.a.createElement(f.a.Group,{as:i.a},r.a.createElement(f.a.Label,{column:!0,sm:"2"},"X"),r.a.createElement(s.a,{sm:"10"},r.a.createElement(f.a.Control,{type:"text",name:"x",placeholder:"0.00"}))),r.a.createElement(f.a.Group,{as:i.a},r.a.createElement(f.a.Label,{column:!0,sm:"2"},"Y"),r.a.createElement(s.a,{sm:"10"},r.a.createElement(f.a.Control,{type:"text",name:"y",placeholder:"0.00"}))),r.a.createElement(f.a.Group,{as:i.a},r.a.createElement(s.a,{sm:"12"},r.a.createElement(g.a,{variant:"secondary",block:!0,type:"submit"},"Add"))))))},N=[{title:"Business Analytics lecture example",tooltip:"An example very similar to slide set 8, slide 16 of the Business Analytics lecture.",steps:[{description:r.a.createElement(r.a.Fragment,null,"The first component is chosen such that its variance is as high as possible.",r.a.createElement("br",null),'Hover your mouse over the "',r.a.createElement("u",null,"Component 1"),'" graph located under the Eigenvalues graph, to see the residues.'),data:[[-118.8,-166.9],[-139.8,-96.9],[-51.8,-124.9],[-61.8,-4.9],[-7.8,78.1],[11.2,-30.9],[148.2,183.1],[42.2,78.1],[81.2,-8.9],[97.2,94.1]]}]},{title:"Rotating linear data",tooltip:"Shows how performing PCA on linear data is essentially just a rotation.",steps:[{description:"The data in this is very linear. Click next to rotate the data such that it aligns horizontally.",data:[[-18.72,-10.65],[-26.62,-20.47],[4.93,.38],[12.03,11.23],[28.37,19.52]]},{description:"Note that Component 1 barely changed compared to the unrotated data. Also Component 1 and the Scatter Plot now look very similar.",data:[[-34,-2],[-22,4],[5,-2],[16,4],[35,-1]]},{description:"Now the data is rotated by exactly 90 degrees. The Eigenvalues and Components are completely unaffected.",data:[[-2,-34],[4,-22],[-2,5],[4,16],[-1,35]]}]},{title:"Cluster and outlier",tooltip:"A cluster of 4 points and 1 outlier",steps:[{description:r.a.createElement(r.a.Fragment,null,"In this example you can see how an outlier can affect the PCA.",r.a.createElement("br",null),"Click next to remove the outlier."),data:[[0,0],[-1,-1],[0,1],[-1,0],[-5,6]]},{description:r.a.createElement(r.a.Fragment,null,"The first component has shifted drastically."),data:[[0,0],[-1,-1],[0,1],[-1,0]]}]}],I=function(e){var t=e.setActiveExample,a=e.setExampleStep,n=e.setData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Examples"),r.a.createElement(d.a.Body,null,N.map((function(e,l){return r.a.createElement(O.a,{key:l,placement:"right",overlay:r.a.createElement(k.a,{id:"tooltip-right"},e.tooltip)},r.a.createElement(g.a,{variant:"secondary",block:!0,onClick:function(){t(e),a(0),n(e.steps[0].data)}},e.title))})))))},H=function(){return r.a.createElement("div",{className:"bg-dark text-light text-center",style:{padding:"1em",marginBottom:"1em"}},"\xa9 2020 Marcus Legendre",r.a.createElement("br",null),"This software is licensed under the ",r.a.createElement("a",{href:"https://github.com/orangefoil/ss20-webtools-project/blob/master/LICENSE.md"},"MIT License"),". The source code is hosted on ",r.a.createElement("a",{href:"https://github.com/orangefoil/ss20-webtools-project/"},"GitHub"),".",r.a.createElement("br",null),"Built using Bootstrap (",r.a.createElement("a",{href:"https://github.com/twbs/bootstrap/blob/main/LICENSE"},"MIT License"),"), D3.js (",r.a.createElement("a",{href:"https://github.com/d3/d3/blob/master/LICENSE"},"BSD 3-Clause License"),"), pca-js (MIT License), React (",r.a.createElement("a",{href:"https://github.com/facebook/react/blob/master/LICENSE"},"MIT License"),"), React Bootstrap (",r.a.createElement("a",{href:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE"},"MIT License"),")")},B=function(){return r.a.createElement("div",{className:"bg-dark text-light text-center",style:{padding:"1em",marginBottom:"1em"}},r.a.createElement("h1",null,"Webtools f\xfcr die Lehre"),r.a.createElement("h2",null,"Principal Component Analysis (PCA)"))},M=function(e){return[e.map((function(e){return e[0]})).reduce((function(e,t){return e+t}),0),e.map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0)].map((function(t){return t/e.length}))},P=function(e,t,a,n){var r=t/e;return{gradient:r,c:n-r*a}},L=function(e,t,a,n){return[(n-t)/(e-a),e*((n-t)/(e-a))+t]},F=function(e){var t=e.data,a=e.setData,l=e.principalComponents,c=e.mean,o=e.highlightedComponent,i=e.highlightedIndex,s=e.setHighlightedIndex,u=Object(n.useRef)();return Object(n.useEffect)((function(){var e=Object(j.i)(u.current),n=-5,r=5;t.length>0&&(n=Math.min.apply(Math,Object(v.a)(t.map((function(e){return e[0]}))).concat(Object(v.a)(t.map((function(e){return e[1]})))))-5,r=Math.max.apply(Math,Object(v.a)(t.map((function(e){return e[0]}))).concat(Object(v.a)(t.map((function(e){return e[1]})))))+5);var c=Object(j.h)().domain([n,r]).range([0,600]).nice(),m=Object(j.h)().domain([r,n]).range([0,600]).nice(),d=Object(j.a)(c);e.select(".x-axis").style("transform","translateY(600px)").transition().call(d);var h=Object(j.b)(m);if(e.select(".y-axis").style("transform","translateX(600px)").transition().call(h),o&&l[1]&&t.length>1){var p=o%2,E=P(l[p].vector[0],l[p].vector[1],0,0),g=t.map((function(e){var t=P(l[p].vector[0],l[p].vector[1],e[0],e[1]);return L(-1/E.gradient,E.c,t.gradient,t.c)}));e.selectAll(".residue").data(t).join("line").attr("class","residue").attr("clip-path","url(#rect-clip)").attr("stroke-width",1).attr("stroke","red").attr("x1",(function(e){return c(e[0])})).attr("y1",(function(e){return m(e[1])})).attr("x2",(function(e,t){return c(g[t][0])})).attr("y2",(function(e,t){return m(g[t][1])})).transition().duration(500).attr("opacity",1)}else e.selectAll(".residue").remove();e.select(".data-points").selectAll(".dataPoint").data(t,(function(e){return[e[0],e[1]]})).join((function(e){e.append("circle").attr("class","dataPoint").style("fill",(function(e,t){return t===i?"red":"black"})).attr("cx",(function(e){return c(e[0])})).attr("cy",(function(e){return m(e[1])})).attr("r",6).attr("opacity",0).call((function(e){return e.transition().duration(500).attr("r",(function(e,t){return t===i?5:3})).attr("opacity",1)}))}),(function(e){e.transition().ease(j.d).duration(500).attr("r",(function(e,t){return t===i?5:3})).style("fill",(function(e,t){return t===i?"red":"black"})).attr("opacity",1).attr("cx",(function(e){return c(e[0])})).attr("cy",(function(e){return m(e[1])}))}),(function(e){e.transition().attr("r",0).remove()})),e.select(".data-points").selectAll(".dataPoint").on("click",(function(e,n){j.e.stopPropagation();var r=t.slice();r.splice(n,1),a(r)})),e.on("click",(function(){var e=Object(j.f)(u.current),n=[c.invert(e[0]),m.invert(e[1])];a(t.concat([n]))})),e.select(".data-points").selectAll(".dataPoint").on("mouseenter",(function(e,t){s(t)})).on("mouseleave",(function(){s(null)})),e.select(".principal-components").selectAll(".component").data(l).join("line").attr("class","component").attr("clip-path","url(#rect-clip)").attr("stroke-width",2).attr("stroke",(function(e,t){return C(t)})).transition().ease(j.c).duration(1e3).attr("x1",(function(e){return c(3*n*e.vector[0])})).attr("y1",(function(e){return m(3*n*e.vector[1])})).attr("x2",(function(e){return c(3*r*e.vector[0])})).attr("y2",(function(e){return m(3*r*e.vector[1])}))}),[t,a,l,c,o,s,i]),r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Scatter Plot"),r.a.createElement(d.a.Body,null,r.a.createElement(y.a,null,r.a.createElement("svg",{ref:u,width:"600",height:"600",viewBox:"0 0 650 650"},r.a.createElement("clipPath",{id:"rect-clip"},r.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600"})),r.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600",fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"}),r.a.createElement("g",{className:"principal-components"}),r.a.createElement("g",{className:"data-points"}))),r.a.createElement(D,{title:p.ScatterPlot.title,shorttext:p.ScatterPlot.shortText,longtext:p.ScatterPlot.longText})))},R=function(e){var t=e.principalComponents,a=Object(n.useRef)(),l=t.map((function(e){return e.eigenvalue}));return Object(n.useEffect)((function(){var e=Object(j.i)(a.current),t=Math.max.apply(Math,Object(v.a)(l)),n=Object(j.g)().domain(l.map((function(e,t){return t}))).range([0,300]).padding(.5),r=Object(j.h)().domain([0,t]).range([150,0]),c=Object(j.a)(n).ticks(l.length);e.select(".x-axis").style("transform","translateY(150px)").call(c);var o=Object(j.b)(r);e.select(".y-axis").style("transform","translateX(300px)").transition().ease(j.d).duration(500).call(o),e.selectAll(".bar").data(l).join("rect").attr("class","bar").style("transform","scale(1, -1)").attr("x",(function(e,t){return n(t)})).attr("y",-150).attr("width",n.bandwidth()).transition().ease(j.d).duration(500).attr("height",(function(e){return 150-r(e)})).style("fill",(function(e,t){return C(t)}))}),[t,l]),r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Eigenvalues"),r.a.createElement(d.a.Body,null,r.a.createElement(y.a,{aspectRatio:"16by9"},r.a.createElement("svg",{ref:a,width:300,height:150,viewBox:"0 0 ".concat(330," ").concat(180)},r.a.createElement("rect",{x:"0",y:"0",width:300,height:150,fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"}))),r.a.createElement(D,{title:p.EigenvaluesChart.title,shorttext:p.EigenvaluesChart.shortText,longtext:p.EigenvaluesChart.longText})))},G=a(97),X=function(e){var t=e.activeExample,a=e.setActiveExample,n=e.exampleStep,l=e.setExampleStep,c=e.setData;return t?r.a.createElement(d.a,null,r.a.createElement(d.a.Header,{as:"h3"},"Example: ",t.title),r.a.createElement(d.a.Body,null,t.steps[n].description,r.a.createElement("br",null),t.steps.length>1?r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),"Step ",n+1," of ",t.steps.length,r.a.createElement(G.a,{className:"float-right"},r.a.createElement(g.a,{variant:"secondary",disabled:0===n,onClick:function(){return c(t.steps[n-1].data),void l(n-1)}},"\u21e6 Back"),r.a.createElement(g.a,{variant:"secondary",disabled:n+1>=t.steps.length,onClick:function(){return c(t.steps[n+1].data),void l(n+1)}},"Next \u21e8"))):""),r.a.createElement(d.a.Footer,null,r.a.createElement(g.a,{variant:"outline-dark",block:!0,onClick:function(){a(null),l(0),c([])}},"Close example"))):""};var J=function(){var e=Object(n.useState)([[0,0]]),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),u=Object(o.a)(c,2),d=u[0],h=u[1],p=Object(n.useState)(null),g=Object(o.a)(p,2),f=g[0],b=g[1],v=Object(n.useState)([]),y=Object(o.a)(v,2),j=y[0],C=y[1],O=Object(n.useState)([0,0]),k=Object(o.a)(O,2),A=k[0],D=k[1],w=Object(n.useState)(null),N=Object(o.a)(w,2),P=N[0],L=N[1],G=Object(n.useState)(0),J=Object(o.a)(G,2),Y=J[0],z=J[1];return Object(n.useEffect)((function(){if(0!==a.length){var e=m.a.getEigenVectors(a);C(e),D(M(a))}else C([])}),[a]),r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement(B,null),r.a.createElement(i.a,null,r.a.createElement(s.a,{xs:"2",style:{minWidth:"300px"}},r.a.createElement(E,null),r.a.createElement(x,{data:a,setData:l,setHighlightedComponent:h,setHighlightedIndex:b}),r.a.createElement(I,{setActiveExample:L,setExampleStep:z,setData:l}),r.a.createElement(X,{activeExample:P,setActiveExample:L,exampleStep:Y,setExampleStep:z,setData:l})),r.a.createElement(s.a,{lg:"5"},r.a.createElement(F,{data:a,setData:l,principalComponents:j,mean:A,highlightedComponent:d,highlightedIndex:f,setHighlightedIndex:b})),r.a.createElement(s.a,{lg:"3"},r.a.createElement(R,{principalComponents:j}),r.a.createElement("div",{id:"singleComponents"},r.a.createElement(S,{data:a,principalComponents:j,setHighlightedComponent:h,highlightedIndex:f,setHighlightedIndex:b,n:"1"}),r.a.createElement(S,{data:a,principalComponents:j,setHighlightedComponent:h,highlightedIndex:f,setHighlightedIndex:b,n:"2"}))),r.a.createElement(s.a,{lg:"2"},r.a.createElement(T,{data:a,setData:l,highlightedIndex:f,setHighlightedIndex:b}))),r.a.createElement(H,null))};c.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.3222339f.chunk.js.map