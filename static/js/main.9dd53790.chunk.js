(this["webpackJsonpss20-webtools-project"]=this["webpackJsonpss20-webtools-project"]||[]).push([[0],{64:function(e,t,a){e.exports=a(75)},69:function(e,t,a){},70:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),c=a.n(r),o=(a(69),a(14)),i=(a(70),a(84)),s=a(51),u=a(88),m=a(89),d=a(16),h=a.n(d),p=a(80),E={About:{title:"About",text:"This text explains the purpose of this website."},AdjustedData:{title:"Component",shortText:"This is what the data looks like after reducing from two to one dimension",longText:"Lorem ipsum dolor sit amet. AdjustedData longText. TODO"},EigenvaluesChart:{title:"Eigenvalues",shortText:"The eigenvalues indicate the significance of the components relative to each other.",longText:"Lorem ipsum dolor sit amet. EigenvaluesChart longText. TODO"},ScatterPlot:{title:"Scatter plot with component vectors",shortText:l.a.createElement(l.a.Fragment,null,"Example using ",l.a.createElement("u",null,"HTML"),". Although technically this is RSX."),longText:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Lorem ipsum dolor sit amet. ScatterPlot longText. ",l.a.createElement("strong",null,"Bold text"),"."),l.a.createElement("a",{href:"https://reactjs.org/docs/introducing-jsx.html"},"Learn more about RSX"),l.a.createElement("br",null),"The following image is embedded using a Bootstrap tag.",l.a.createElement("br",null),l.a.createElement(p.a,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/GaussianScatterPCA.svg/500px-GaussianScatterPCA.svg.png",fluid:!0}))}},g=function(){return l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"About"),l.a.createElement(u.a.Body,null,E.About.text))},f=a(10),x=a(82),b=a(6),v=function(e){switch(e){case 0:return"#ff9e1b";case 1:return"#c4d52a";case 2:return"#7c8034";default:return"#cccccc"}},y=a(87),j=a(81),O=a(85),C=function(e){var t=e.title,a=e.shorttext,r=e.longtext,c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],u=i[1],d=function(){return u(!1)};return l.a.createElement("div",{className:"float-right"},l.a.createElement(y.a,{placement:"left",overlay:l.a.createElement(j.a,{id:"tooltip-left"},l.a.createElement("p",null,a),l.a.createElement("strong",null,"Click to learn more."))},l.a.createElement("h5",null,l.a.createElement(m.a,{variant:"info",size:"sm",onClick:function(){return u(!0)}},"Help"))),l.a.createElement(O.a,{show:s,onHide:d},l.a.createElement(O.a.Header,{closeButton:!0},l.a.createElement(O.a.Title,null,t)),l.a.createElement(O.a.Body,null,r),l.a.createElement(O.a.Footer,null,l.a.createElement(m.a,{variant:"secondary",onClick:d},"Close"))))},k=function(e){var t=e.data,a=e.principalComponents,r=e.setHighlightedComponent,c=e.highlightedIndex,o=e.setHighlightedIndex,i=e.n,s=Object(n.useRef)();Object(n.useEffect)((function(){var e,n=Object(b.g)(s.current);try{e=h.a.computeAdjustedData(t,a[Number(i)-1]).adjustedData[0]}catch(d){return void console.error("Handled exception in 3rd party library")}var l=Math.min.apply(Math,Object(f.a)(h.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(f.a)(h.a.computeAdjustedData(t,a[1]).adjustedData[0]))),r=Math.max.apply(Math,Object(f.a)(h.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(f.a)(h.a.computeAdjustedData(t,a[1]).adjustedData[0]))),u=Object(b.f)().domain([l,r]).range([0,315]).nice().clamp(!0),m=Object(b.a)(u);n.select(".x-axis").style("transform","translateY(".concat(62.5,"px)")).transition().call(m),n.selectAll(".dataPoint").data(e).join("circle").attr("class","dataPoint").attr("r",(function(e,t){return t===c?5:3})).attr("cy",62.5).style("fill",(function(e,t){return t===c?"red":"black"})).transition().attr("cx",(function(e){return u(e)})),n.selectAll(".dataPoint").on("mouseenter",(function(e,t){o(t)})).on("mouseleave",(function(){o(null)}))}),[t,a,i,c,o]);var m={textDecoration:"underline",textDecorationColor:v(Number(i-1)),textDecorationThickness:".15em"};return l.a.createElement("div",{onMouseEnter:function(){return r(i)},onMouseLeave:function(){return r(null)}},l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3",style:m},"Component ",i),l.a.createElement(u.a.Body,null,l.a.createElement(x.a,{aspectRatio:"21by9"},l.a.createElement("svg",{ref:s,width:315,height:135,viewBox:"0 0 ".concat(315," ").concat(165)},l.a.createElement("rect",{x:"0",y:"0",width:315,height:135,fill:"#eee"}),l.a.createElement("g",{className:"x-axis"}))),l.a.createElement(C,{title:E.AdjustedData.title,shorttext:E.AdjustedData.shortText,longtext:E.AdjustedData.longText}))))},D=a(83),A=a(86),w=function(e){var t=e.data,a=e.setData,n=e.highlightedIndex,r=e.setHighlightedIndex,c=function(e){return function(n){n.preventDefault(),a(t.filter((function(t,a){return e!==a})))}};return l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Data"),l.a.createElement(u.a.Body,null,l.a.createElement(D.a,{bordered:!0,hover:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"X"),l.a.createElement("th",null,"Y"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,t.sort().map((function(e,t){return l.a.createElement("tr",{key:t,style:t===n?{color:"red"}:{},onMouseEnter:function(){return r(t)},onMouseLeave:function(){return r(null)}},l.a.createElement("td",null,Number.parseFloat(e[0]).toFixed(2)),l.a.createElement("td",null,Number.parseFloat(e[1]).toFixed(2)),l.a.createElement("td",null,l.a.createElement(m.a,{variant:"link",size:"sm",onClick:c(t)},"[X]")))})))),l.a.createElement("h5",null,"Add data point"),l.a.createElement(A.a,{onSubmit:function(e){e.preventDefault();var n=Number(e.target.x.value),l=Number(e.target.y.value);a(t.concat([[n,l]])),e.target.x.value="",e.target.y.value=""}},l.a.createElement(A.a.Group,{as:i.a},l.a.createElement(A.a.Label,{column:!0,sm:"2"},"X"),l.a.createElement(s.a,{sm:"10"},l.a.createElement(A.a.Control,{type:"text",name:"x",placeholder:"0.00"})),l.a.createElement(A.a.Label,{column:!0,sm:"2"},"Y"),l.a.createElement(s.a,{sm:"10"},l.a.createElement(A.a.Control,{type:"text",name:"y",placeholder:"0.00"})),l.a.createElement(s.a,{sm:"12"},l.a.createElement(m.a,{variant:"secondary",block:!0,type:"submit"},"Add"))))))},T=[{title:"Cluster and outlier",tooltip:"A cluster of 4 points and 1 outlier",steps:[{description:l.a.createElement(l.a.Fragment,null,"In this example you can see how an outlier can affect the PCA.",l.a.createElement("br",null),"Click next to remove the outlier."),data:[[0,0],[-1,-1],[0,1],[-1,0],[-5,6]]},{description:l.a.createElement(l.a.Fragment,null,"The first component has shifted drastically."),data:[[0,0],[-1,-1],[0,1],[-1,0]]}]},{title:"Boring",tooltip:"This example is boring",steps:[{description:l.a.createElement(l.a.Fragment,null,"This supports ",l.a.createElement("strong",null,"HTML tags")," as well."),data:[[9,-7],[12,3],[-8,-8]]}]}],H=function(e){var t=e.setData,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(0),d=Object(o.a)(s,2),h=d[0],p=d[1],E={marginLeft:".75em"};return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Examples"),l.a.createElement(u.a.Body,null,T.map((function(e,a){return l.a.createElement(y.a,{key:a,placement:"right",overlay:l.a.createElement(j.a,{id:"tooltip-right"},e.tooltip)},l.a.createElement(m.a,{variant:"secondary",block:!0,onClick:function(){i(e),p(0),t(e.steps[0].data)}},e.title))})))),c?l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Example: ",c.title),l.a.createElement(u.a.Body,null,c.steps[h].description,l.a.createElement("br",null),c.steps.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),"Step ",h+1," of ",c.steps.length,l.a.createElement(m.a,{variant:"secondary",style:E,disabled:0===h,onClick:function(){return t(c.steps[h-1].data),void p(h-1)}},"Back"),l.a.createElement(m.a,{variant:"secondary",style:E,disabled:h+1>=c.steps.length,onClick:function(){return t(c.steps[h+1].data),void p(h+1)}},"Next")):""),l.a.createElement(u.a.Footer,null,l.a.createElement(m.a,{variant:"outline-dark",block:!0,onClick:function(){i(null),p(0),t([])}},"Close example"))):"")},M=function(e,t,a,n){var l=t/e;return{gradient:l,c:n-l*a}},P=function(e,t,a,n){return[(n-t)/(e-a),e*((n-t)/(e-a))+t]},S=function(e){var t=e.data,a=e.setData,r=e.principalComponents,c=e.highlightedComponent,o=e.highlightedIndex,i=e.setHighlightedIndex,s=Object(n.useRef)();return Object(n.useEffect)((function(){var e=Object(b.g)(s.current),n=-5,l=5;t.length>0&&(n=Math.min.apply(Math,Object(f.a)(t.map((function(e){return e[0]}))).concat(Object(f.a)(t.map((function(e){return e[1]})))))-5,l=Math.max.apply(Math,Object(f.a)(t.map((function(e){return e[0]}))).concat(Object(f.a)(t.map((function(e){return e[1]})))))+5);var u=Object(b.f)().domain([n,l]).range([0,600]).nice(),m=Object(b.f)().domain([n,l]).range([0,600]).nice(),d=Object(b.a)(u);e.select(".x-axis").style("transform","translateY(600px)").transition().call(d);var h=Object(b.b)(m);if(e.select(".y-axis").style("transform","translateX(600px)").transition().call(h),c&&r[1]&&t.length>1){var p=c%2,E=M(r[p].vector[0],r[p].vector[1],0,0),g=t.map((function(e){var t=M(r[p].vector[0],r[p].vector[1],e[0],e[1]);return P(-1/E.gradient,E.c,t.gradient,t.c)}));e.selectAll(".residue").data(t).join("line").attr("class","residue").attr("clip-path","url(#rect-clip)").attr("stroke-width",1).attr("stroke","red").attr("x1",(function(e){return u(e[0])})).attr("y1",(function(e){return m(e[1])})).attr("x2",(function(e,t){return u(g[t][0])})).attr("y2",(function(e,t){return m(g[t][1])})).transition().duration(500).attr("opacity",1)}else e.selectAll(".residue").remove();e.select(".data-points").selectAll(".dataPoint").data(t).join("circle").attr("class","dataPoint").attr("r",(function(e,t){return t===o?5:3})).style("fill",(function(e,t){return t===o?"red":"black"})).transition().attr("cx",(function(e){return u(e[0])})).attr("cy",(function(e){return m(e[1])})),e.select(".data-points").selectAll(".dataPoint").on("click",(function(e,n){b.c.stopPropagation();var l=t.slice();l.splice(n,1),a(l)})),e.on("click",(function(){var e=Object(b.d)(s.current),n=[u.invert(e[0]),m.invert(e[1])];a(t.concat([n]))})),e.select(".data-points").selectAll(".dataPoint").on("mouseenter",(function(e,t){i(t)})).on("mouseleave",(function(){i(null)})),e.select(".principal-components").selectAll(".component").data(r).join("line").attr("class","component").attr("clip-path","url(#rect-clip)").attr("stroke-width",2).attr("stroke",(function(e,t){return v(t)})).transition().attr("x1",(function(e){return u(2*n*e.vector[0])})).attr("y1",(function(e){return m(2*n*e.vector[1])})).attr("x2",(function(e){return u(2*l*e.vector[0])})).attr("y2",(function(e){return m(2*l*e.vector[1])}))}),[t,a,r,c,i,o]),l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Scatter Plot"),l.a.createElement(u.a.Body,null,l.a.createElement(x.a,null,l.a.createElement("svg",{ref:s,width:"600",height:"600",viewBox:"0 0 650 650"},l.a.createElement("clipPath",{id:"rect-clip"},l.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600"})),l.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600",fill:"#eee"}),l.a.createElement("g",{className:"x-axis"}),l.a.createElement("g",{className:"y-axis"}),l.a.createElement("g",{className:"principal-components"}),l.a.createElement("g",{className:"data-points"}))),l.a.createElement(C,{title:E.ScatterPlot.title,shorttext:E.ScatterPlot.shortText,longtext:E.ScatterPlot.longText})))},B=function(e){var t=e.principalComponents,a=Object(n.useRef)(),r=t.map((function(e){return e.eigenvalue}));return Object(n.useEffect)((function(){var e=Object(b.g)(a.current),t=Math.max.apply(Math,Object(f.a)(r)),n=Object(b.e)().domain(r.map((function(e,t){return t}))).range([0,300]).padding(.5),l=Object(b.f)().domain([0,t]).range([150,0]),c=Object(b.a)(n).ticks(r.length);e.select(".x-axis").style("transform","translateY(150px)").call(c);var o=Object(b.b)(l);e.select(".y-axis").style("transform","translateX(300px)").transition().call(o),e.selectAll(".bar").data(r).join("rect").attr("class","bar").style("transform","scale(1, -1)").attr("x",(function(e,t){return n(t)})).attr("y",-150).attr("width",n.bandwidth()).transition().attr("height",(function(e){return 150-l(e)})).style("fill",(function(e,t){return v(t)}))}),[t,r]),l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Eigenvalues"),l.a.createElement(u.a.Body,null,l.a.createElement(x.a,{aspectRatio:"16by9"},l.a.createElement("svg",{ref:a,width:300,height:150,viewBox:"0 0 ".concat(330," ").concat(180)},l.a.createElement("rect",{x:"0",y:"0",width:300,height:150,fill:"#eee"}),l.a.createElement("g",{className:"x-axis"}),l.a.createElement("g",{className:"y-axis"}))),l.a.createElement(C,{title:E.EigenvaluesChart.title,shorttext:E.EigenvaluesChart.shortText,longtext:E.EigenvaluesChart.longText})))};var N=function(){var e=Object(n.useState)([[0,0]]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),d=Object(o.a)(c,2),p=d[0],E=d[1],f=Object(n.useState)(null),x=Object(o.a)(f,2),b=x[0],v=x[1],y=Object(n.useState)([]),j=Object(o.a)(y,2),O=j[0],C=j[1];return Object(n.useEffect)((function(){if(0!==a.length){var e=h.a.getEigenVectors(a);C(e)}else C([])}),[a]),l.a.createElement("div",{className:"w-100 p-3"},l.a.createElement("div",{className:"bg-dark text-light text-center",style:{padding:"1em",marginBottom:"1em"}},l.a.createElement("h1",null,"Webtools f\xfcr die Lehre"),l.a.createElement("h2",null,"Principal Component Analysis (PCA)")),l.a.createElement(i.a,null,l.a.createElement(s.a,{xs:"2",style:{minWidth:"300px"}},l.a.createElement(g,null),l.a.createElement(u.a,null,l.a.createElement(u.a.Header,{as:"h3"},"Menu"),l.a.createElement(u.a.Body,null,l.a.createElement(m.a,{variant:"secondary",block:!0,onClick:function(){for(var e=[],t=0;t<20;t++)e=e.concat([[200*Math.random()-100,200*Math.random()-100]]);r(e)}},"Generate random data"),l.a.createElement(m.a,{variant:"secondary",block:!0,onClick:function(){return r([]),E(null),void v(null)}},"Clear data"),a.length>0?l.a.createElement(m.a,{variant:"secondary",block:!0,onClick:function(){return r(h.a.computeDeviationMatrix(a))}},"Center Data"):l.a.createElement(m.a,{variant:"secondary",block:!0,disabled:!0},"Center Data"))),l.a.createElement(H,{setData:r})),l.a.createElement(s.a,{lg:"5"},l.a.createElement(S,{data:a,setData:r,principalComponents:O,highlightedComponent:p,highlightedIndex:b,setHighlightedIndex:v})),l.a.createElement(s.a,{lg:"3"},l.a.createElement(B,{principalComponents:O}),l.a.createElement("div",{id:"singleComponents"},l.a.createElement(k,{data:a,principalComponents:O,setHighlightedComponent:E,highlightedIndex:b,setHighlightedIndex:v,n:"1"}),l.a.createElement(k,{data:a,principalComponents:O,setHighlightedComponent:E,highlightedIndex:b,setHighlightedIndex:v,n:"2"}))),l.a.createElement(s.a,{lg:"2"},l.a.createElement(w,{data:a,setData:r,highlightedIndex:b,setHighlightedIndex:v}))))};c.a.render(l.a.createElement(N,null),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.9dd53790.chunk.js.map