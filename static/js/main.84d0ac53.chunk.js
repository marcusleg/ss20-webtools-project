(this["webpackJsonpss20-webtools-project"]=this["webpackJsonpss20-webtools-project"]||[]).push([[0],{31:function(t,e,n){t.exports=n(38)},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),i=(n(36),n(7)),o=(n(37),n(3)),u=n.n(o),s=n(2),d=n(1),m=function(t){switch(t){case 0:return"#ff9e1b";case 1:return"#c4d52a";case 2:return"#7c8034";default:return"#cccccc"}},p=function(t){var e=t.data,n=t.principalComponents,c=t.setHighlightedComponent,l=t.highlightedIndex,i=t.setHighlightedIndex,o=t.n,p=Object(a.useRef)();Object(a.useEffect)((function(){var t,a=Object(d.g)(p.current);try{t=u.a.computeAdjustedData(e,n[Number(o)-1]).adjustedData[0]}catch(f){return void console.error("Handled exception in 3rd party library")}var r=Math.min.apply(Math,Object(s.a)(u.a.computeAdjustedData(e,n[0]).adjustedData[0]).concat(Object(s.a)(u.a.computeAdjustedData(e,n[1]).adjustedData[0]))),c=Math.max.apply(Math,Object(s.a)(u.a.computeAdjustedData(e,n[0]).adjustedData[0]).concat(Object(s.a)(u.a.computeAdjustedData(e,n[1]).adjustedData[0]))),m=Object(d.f)().domain([r,c]).range([0,300]).nice().clamp(!0),h=Object(d.a)(m);a.select(".x-axis").style("transform","translateY(25px)").transition().call(h),a.selectAll(".dataPoint").data(t).join("circle").attr("class","dataPoint").attr("r",(function(t,e){return e===l?5:3})).attr("cy",25).style("fill",(function(t,e){return e===l?"red":"black"})).transition().attr("cx",(function(t){return m(t)})),a.selectAll(".dataPoint").on("mouseenter",(function(t,e){i(e)})).on("mouseleave",(function(){i(null)}))}),[e,n,o,l,i]);var h={textDecoration:"underline",textDecorationColor:m(Number(o-1)),textDecorationThickness:".15em"};return r.a.createElement("div",{onMouseEnter:function(){return c(o)},onMouseLeave:function(){return c(null)}},r.a.createElement("h3",{style:h},"Component ",o),r.a.createElement("svg",{ref:p,height:"60"},r.a.createElement("g",{className:"x-axis"})))},h=function(t){var e=t.data,n=t.setData,a=t.highlightedIndex,c=t.setHighlightedIndex,l=function(t){return function(a){a.preventDefault(),n(e.filter((function(e,n){return t!==n})))}},i={border:"none",color:"darkblue",cursor:"pointer",display:"inline",margin:0,padding:0};return r.a.createElement("div",{id:"dataTable"},r.a.createElement("h3",null,"Data"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"X"),r.a.createElement("th",null,"Y")),e.sort().map((function(t,e){return r.a.createElement("tr",{key:e,style:e===a?{color:"red"}:{},onMouseEnter:function(){return c(e)},onMouseLeave:function(){return c(null)}},r.a.createElement("td",null,Number.parseFloat(t[0]).toFixed(2)),r.a.createElement("td",null,Number.parseFloat(t[1]).toFixed(2)),r.a.createElement("td",null,r.a.createElement("button",{style:i,onClick:l(e)},"[X]")))})))),r.a.createElement("br",null),r.a.createElement("b",null,"Add data point"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=Number(t.target.x.value),r=Number(t.target.y.value);n(e.concat([[a,r]])),t.target.x.value="",t.target.y.value=""}},"X: ",r.a.createElement("input",{name:"x",style:{width:"25px"}}),r.a.createElement("br",null),"Y: ",r.a.createElement("input",{name:"y",style:{width:"25px"}}),r.a.createElement("br",null),r.a.createElement("button",{style:{width:"75px"}},"Add")))},f=function(t,e,n,a){var r=e/t;return{gradient:r,c:a-r*n}},g=function(t,e,n,a){return[(a-e)/(t-n),t*((a-e)/(t-n))+e]},b=function(t){var e=t.data,n=t.setData,c=t.principalComponents,l=t.highlightedComponent,i=t.highlightedIndex,o=t.setHighlightedIndex,u=Object(a.useRef)();return Object(a.useEffect)((function(){var t=Object(d.g)(u.current),a=-5,r=5;e.length>0&&(a=Math.min.apply(Math,Object(s.a)(e.map((function(t){return t[0]}))).concat(Object(s.a)(e.map((function(t){return t[1]})))))-5,r=Math.max.apply(Math,Object(s.a)(e.map((function(t){return t[0]}))).concat(Object(s.a)(e.map((function(t){return t[1]})))))+5);var p=Object(d.f)().domain([a,r]).range([0,600]).nice(),h=Object(d.f)().domain([a,r]).range([0,600]).nice(),b=Object(d.a)(p);t.select(".x-axis").style("transform","translateY(600px)").transition().call(b);var E=Object(d.b)(h);if(t.select(".y-axis").style("transform","translateX(600px)").transition().call(E),l&&c[1]&&e.length>1){var x=l-1,v=f(c[x].vector[0],c[x].vector[1],0,0),j=e.map((function(t){var e=f(c[x].vector[0],c[x].vector[1],t[0],t[1]);return g(-1/v.gradient,v.c,e.gradient,e.c)}));t.selectAll(".residue").data(e).join("line").attr("class","residue").attr("stroke-width",1).attr("stroke","red").attr("x1",(function(t){return p(t[0])})).attr("y1",(function(t){return h(t[1])})).attr("x2",(function(t,e){return p(j[e][0])})).attr("y2",(function(t,e){return h(j[e][1])})).transition().duration(500).attr("opacity",1)}else t.selectAll(".residue").remove();t.select(".data-points").selectAll(".dataPoint").data(e).join("circle").attr("class","dataPoint").attr("r",(function(t,e){return e===i?5:3})).style("fill",(function(t,e){return e===i?"red":"black"})).transition().attr("cx",(function(t){return p(t[0])})).attr("cy",(function(t){return h(t[1])})),t.select(".data-points").selectAll(".dataPoint").on("click",(function(t,a){d.c.stopPropagation();var r=e.slice();r.splice(a,1),n(r)})),t.on("click",(function(){var t=Object(d.d)(u.current),a=[p.invert(t[0]),h.invert(t[1])];n(e.concat([a]))})),t.select(".data-points").selectAll(".dataPoint").on("mouseenter",(function(t,e){o(e)})).on("mouseleave",(function(){o(null)})),t.select(".principal-components").selectAll(".component").data(c).join("line").attr("class","component").attr("clip-path","url(#rect-clip)").attr("stroke-width",2).attr("stroke",(function(t,e){return m(e)})).transition().attr("x1",(function(t){return p(2*a*t.vector[0])})).attr("y1",(function(t){return h(2*a*t.vector[1])})).attr("x2",(function(t){return p(2*r*t.vector[0])})).attr("y2",(function(t){return h(2*r*t.vector[1])}))}),[e,n,c,l,o,i]),r.a.createElement("div",{id:"scatterPlot"},r.a.createElement("h3",null,"Scatter Plot"),r.a.createElement("svg",{ref:u,width:"600",height:"600",viewBox:"0 0 600 600"},r.a.createElement("clipPath",{id:"rect-clip"},r.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600"})),r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"}),r.a.createElement("g",{className:"principal-components"}),r.a.createElement("g",{className:"data-points"})))},E=function(t){var e=t.principalComponents,n=Object(a.useRef)(),c=e.map((function(t){return t.eigenvalue}));return Object(a.useEffect)((function(){var t=Object(d.g)(n.current),e=Math.max.apply(Math,Object(s.a)(c)),a=Object(d.e)().domain(c.map((function(t,e){return e}))).range([0,300]).padding(.5),r=Object(d.f)().domain([0,e]).range([150,0]),l=Object(d.a)(a).ticks(c.length);t.select(".x-axis").style("transform","translateY(150px)").call(l);var i=Object(d.b)(r);t.select(".y-axis").style("transform","translateX(300px)").transition().call(i),t.selectAll(".bar").data(c).join("rect").attr("class","bar").style("transform","scale(1, -1)").attr("x",(function(t,e){return a(e)})).attr("y",-150).attr("width",a.bandwidth()).transition().attr("height",(function(t){return 150-r(t)})).style("fill",(function(t,e){return m(e)}))}),[e,c]),r.a.createElement("div",{id:"principalComponents"},r.a.createElement("h3",null,"Principal Components"),r.a.createElement("svg",{ref:n},r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"})))};var x=function(){var t=Object(a.useState)([[0,0]]),e=Object(i.a)(t,2),n=e[0],c=e[1],l=Object(a.useState)(null),o=Object(i.a)(l,2),s=o[0],d=o[1],m=Object(a.useState)(null),f=Object(i.a)(m,2),g=f[0],x=f[1],v=Object(a.useState)([]),j=Object(i.a)(v,2),y=j[0],O=j[1];return Object(a.useEffect)((function(){if(0!==n.length){var t=u.a.getEigenVectors(n);O(t)}else O([])}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"header"},r.a.createElement("h1",null,"Webtools f\xfcr die Lehre"),r.a.createElement("h2",null,"Principal Component Analysis (PCA)")),r.a.createElement("div",{id:"buttons"},r.a.createElement("h3",null,"Menu"),r.a.createElement("button",{onClick:function(){for(var t=[],e=0;e<20;e++)t=t.concat([[200*Math.random()-100,200*Math.random()-100]]);c(t)}},"Generate random data"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return c([])}},"Clear data"),r.a.createElement("br",null),n.length>0?r.a.createElement("button",{onClick:function(){return c(u.a.computeDeviationMatrix(n))}},"Center Data"):r.a.createElement("button",{disabled:!0},"Center Data")),r.a.createElement(b,{data:n,setData:c,principalComponents:y,highlightedComponent:s,highlightedIndex:g,setHighlightedIndex:x}),r.a.createElement(E,{principalComponents:y}),r.a.createElement("div",{id:"singleComponents"},r.a.createElement(p,{data:n,principalComponents:y,setHighlightedComponent:d,highlightedIndex:g,setHighlightedIndex:x,n:"1"}),r.a.createElement(p,{data:n,principalComponents:y,setHighlightedComponent:d,highlightedIndex:g,setHighlightedIndex:x,n:"2"})),r.a.createElement(h,{data:n,setData:c,highlightedIndex:g,setHighlightedIndex:x}))};l.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.84d0ac53.chunk.js.map