(this["webpackJsonpss20-webtools-project"]=this["webpackJsonpss20-webtools-project"]||[]).push([[0],{42:function(e,t,a){e.exports=a(52)},47:function(e,t,a){},48:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),i=(a(47),a(12)),o=(a(48),a(55)),s=a(30),u=a(57),m=a(58),d=a(8),h=a.n(d),p=a(6),f=a(53),g=a(5),E=function(e){switch(e){case 0:return"#ff9e1b";case 1:return"#c4d52a";case 2:return"#7c8034";default:return"#cccccc"}},b=function(e){var t=e.data,a=e.principalComponents,c=e.setHighlightedComponent,l=e.highlightedIndex,i=e.setHighlightedIndex,o=e.n,s=Object(n.useRef)();Object(n.useEffect)((function(){var e,n=Object(g.g)(s.current);try{e=h.a.computeAdjustedData(t,a[Number(o)-1]).adjustedData[0]}catch(d){return void console.error("Handled exception in 3rd party library")}var r=Math.min.apply(Math,Object(p.a)(h.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(p.a)(h.a.computeAdjustedData(t,a[1]).adjustedData[0]))),c=Math.max.apply(Math,Object(p.a)(h.a.computeAdjustedData(t,a[0]).adjustedData[0]).concat(Object(p.a)(h.a.computeAdjustedData(t,a[1]).adjustedData[0]))),u=Object(g.f)().domain([r,c]).range([0,315]).nice().clamp(!0),m=Object(g.a)(u);n.select(".x-axis").style("transform","translateY(".concat(62.5,"px)")).transition().call(m),n.selectAll(".dataPoint").data(e).join("circle").attr("class","dataPoint").attr("r",(function(e,t){return t===l?5:3})).attr("cy",62.5).style("fill",(function(e,t){return t===l?"red":"black"})).transition().attr("cx",(function(e){return u(e)})),n.selectAll(".dataPoint").on("mouseenter",(function(e,t){i(t)})).on("mouseleave",(function(){i(null)}))}),[t,a,o,l,i]);var m={textDecoration:"underline",textDecorationColor:E(Number(o-1)),textDecorationThickness:".15em"};return r.a.createElement("div",{onMouseEnter:function(){return c(o)},onMouseLeave:function(){return c(null)}},r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{as:"h3",style:m},"Component ",o),r.a.createElement(u.a.Body,null,r.a.createElement(f.a,{aspectRatio:"21by9"},r.a.createElement("svg",{ref:s,width:315,height:135,viewBox:"0 0 ".concat(315," ").concat(135)},r.a.createElement("rect",{x:"0",y:"0",width:315,height:135,fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}))))))},x=a(54),v=a(56),j=function(e){var t=e.data,a=e.setData,n=e.highlightedIndex,c=e.setHighlightedIndex,l=function(e){return function(n){n.preventDefault(),a(t.filter((function(t,a){return e!==a})))}};return r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{as:"h3"},"Data"),r.a.createElement(u.a.Body,null,r.a.createElement(x.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"X"),r.a.createElement("th",null,"Y"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.sort().map((function(e,t){return r.a.createElement("tr",{key:t,style:t===n?{color:"red"}:{},onMouseEnter:function(){return c(t)},onMouseLeave:function(){return c(null)}},r.a.createElement("td",null,Number.parseFloat(e[0]).toFixed(2)),r.a.createElement("td",null,Number.parseFloat(e[1]).toFixed(2)),r.a.createElement("td",null,r.a.createElement(m.a,{variant:"link",size:"sm",onClick:l(t)},"[X]")))})))),r.a.createElement("h5",null,"Add data point"),r.a.createElement(v.a,{onSubmit:function(e){e.preventDefault();var n=Number(e.target.x.value),r=Number(e.target.y.value);a(t.concat([[n,r]])),e.target.x.value="",e.target.y.value=""}},r.a.createElement(v.a.Group,{as:o.a},r.a.createElement(v.a.Label,{column:!0,sm:"2"},"X"),r.a.createElement(s.a,{sm:"10"},r.a.createElement(v.a.Control,{type:"text",name:"x",placeholder:"0.00"})),r.a.createElement(v.a.Label,{column:!0,sm:"2"},"Y"),r.a.createElement(s.a,{sm:"10"},r.a.createElement(v.a.Control,{type:"text",name:"y",placeholder:"0.00"})),r.a.createElement(s.a,{sm:"12"},r.a.createElement(m.a,{variant:"primary",block:!0,type:"submit"},"Add"))))))},y=function(e,t,a,n){var r=t/e;return{gradient:r,c:n-r*a}},O=function(e,t,a,n){return[(n-t)/(e-a),e*((n-t)/(e-a))+t]},k=function(e){var t=e.data,a=e.setData,c=e.principalComponents,l=e.highlightedComponent,i=e.highlightedIndex,o=e.setHighlightedIndex,s=Object(n.useRef)();return Object(n.useEffect)((function(){var e=Object(g.g)(s.current),n=-5,r=5;t.length>0&&(n=Math.min.apply(Math,Object(p.a)(t.map((function(e){return e[0]}))).concat(Object(p.a)(t.map((function(e){return e[1]})))))-5,r=Math.max.apply(Math,Object(p.a)(t.map((function(e){return e[0]}))).concat(Object(p.a)(t.map((function(e){return e[1]})))))+5);var u=Object(g.f)().domain([n,r]).range([0,600]).nice(),m=Object(g.f)().domain([n,r]).range([0,600]).nice(),d=Object(g.a)(u);e.select(".x-axis").style("transform","translateY(600px)").transition().call(d);var h=Object(g.b)(m);if(e.select(".y-axis").style("transform","translateX(600px)").transition().call(h),l&&c[1]&&t.length>1){var f=l-1,b=y(c[f].vector[0],c[f].vector[1],0,0),x=t.map((function(e){var t=y(c[f].vector[0],c[f].vector[1],e[0],e[1]);return O(-1/b.gradient,b.c,t.gradient,t.c)}));e.selectAll(".residue").data(t).join("line").attr("class","residue").attr("clip-path","url(#rect-clip)").attr("stroke-width",1).attr("stroke","red").attr("x1",(function(e){return u(e[0])})).attr("y1",(function(e){return m(e[1])})).attr("x2",(function(e,t){return u(x[t][0])})).attr("y2",(function(e,t){return m(x[t][1])})).transition().duration(500).attr("opacity",1)}else e.selectAll(".residue").remove();e.select(".data-points").selectAll(".dataPoint").data(t).join("circle").attr("class","dataPoint").attr("r",(function(e,t){return t===i?5:3})).style("fill",(function(e,t){return t===i?"red":"black"})).transition().attr("cx",(function(e){return u(e[0])})).attr("cy",(function(e){return m(e[1])})),e.select(".data-points").selectAll(".dataPoint").on("click",(function(e,n){g.c.stopPropagation();var r=t.slice();r.splice(n,1),a(r)})),e.on("click",(function(){var e=Object(g.d)(s.current),n=[u.invert(e[0]),m.invert(e[1])];a(t.concat([n]))})),e.select(".data-points").selectAll(".dataPoint").on("mouseenter",(function(e,t){o(t)})).on("mouseleave",(function(){o(null)})),e.select(".principal-components").selectAll(".component").data(c).join("line").attr("class","component").attr("clip-path","url(#rect-clip)").attr("stroke-width",2).attr("stroke",(function(e,t){return E(t)})).transition().attr("x1",(function(e){return u(2*n*e.vector[0])})).attr("y1",(function(e){return m(2*n*e.vector[1])})).attr("x2",(function(e){return u(2*r*e.vector[0])})).attr("y2",(function(e){return m(2*r*e.vector[1])}))}),[t,a,c,l,o,i]),r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{as:"h3"},"Scatter Plot"),r.a.createElement(u.a.Body,null,r.a.createElement(f.a,null,r.a.createElement("svg",{ref:s,width:"600",height:"600",viewBox:"0 0 650 650"},r.a.createElement("clipPath",{id:"rect-clip"},r.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600"})),r.a.createElement("rect",{x:"0",y:"0",width:"600",height:"600",fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"}),r.a.createElement("g",{className:"principal-components"}),r.a.createElement("g",{className:"data-points"})))))},C=function(e){var t=e.principalComponents,a=Object(n.useRef)(),c=t.map((function(e){return e.eigenvalue}));return Object(n.useEffect)((function(){var e=Object(g.g)(a.current),t=Math.max.apply(Math,Object(p.a)(c)),n=Object(g.e)().domain(c.map((function(e,t){return t}))).range([0,300]).padding(.5),r=Object(g.f)().domain([0,t]).range([150,0]),l=Object(g.a)(n).ticks(c.length);e.select(".x-axis").style("transform","translateY(150px)").call(l);var i=Object(g.b)(r);e.select(".y-axis").style("transform","translateX(300px)").transition().call(i),e.selectAll(".bar").data(c).join("rect").attr("class","bar").style("transform","scale(1, -1)").attr("x",(function(e,t){return n(t)})).attr("y",-150).attr("width",n.bandwidth()).transition().attr("height",(function(e){return 150-r(e)})).style("fill",(function(e,t){return E(t)}))}),[t,c]),r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{as:"h3"},"Principal Components"),r.a.createElement(u.a.Body,null,r.a.createElement(f.a,{aspectRatio:"16by9"},r.a.createElement("svg",{ref:a,width:300,height:150,viewBox:"0 0 ".concat(330," ").concat(180)},r.a.createElement("rect",{x:"0",y:"0",width:300,height:150,fill:"#eee"}),r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"})))))};var D=function(){var e=Object(n.useState)([[0,0]]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),d=Object(i.a)(l,2),p=d[0],f=d[1],g=Object(n.useState)(null),E=Object(i.a)(g,2),x=E[0],v=E[1],y=Object(n.useState)([]),O=Object(i.a)(y,2),D=O[0],w=O[1];return Object(n.useEffect)((function(){if(0!==a.length){var e=h.a.getEigenVectors(a);w(e)}else w([])}),[a]),r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement("div",{className:"bg-dark text-light text-center",style:{padding:"1em",marginBottom:"1em"}},r.a.createElement("h1",null,"Webtools f\xfcr die Lehre"),r.a.createElement("h2",null,"Principal Component Analysis (PCA)")),r.a.createElement(o.a,null,r.a.createElement(s.a,{xs:"2",style:{minWidth:"250px"}},r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{as:"h3"},"Menu"),r.a.createElement(u.a.Body,null,r.a.createElement(m.a,{variant:"outline-dark",block:!0,onClick:function(){for(var e=[],t=0;t<20;t++)e=e.concat([[200*Math.random()-100,200*Math.random()-100]]);c(e)}},"Generate random data"),r.a.createElement("br",null),r.a.createElement(m.a,{variant:"outline-dark",block:!0,onClick:function(){return c([])}},"Clear data"),r.a.createElement("br",null),a.length>0?r.a.createElement(m.a,{variant:"outline-dark",block:!0,onClick:function(){return c(h.a.computeDeviationMatrix(a))}},"Center Data"):r.a.createElement(m.a,{variant:"outline-dark",block:!0,disabled:!0},"Center Data")))),r.a.createElement(s.a,{lg:"5"},r.a.createElement(k,{data:a,setData:c,principalComponents:D,highlightedComponent:p,highlightedIndex:x,setHighlightedIndex:v})),r.a.createElement(s.a,{lg:"3"},r.a.createElement(C,{principalComponents:D}),r.a.createElement("div",{id:"singleComponents"},r.a.createElement(b,{data:a,principalComponents:D,setHighlightedComponent:f,highlightedIndex:x,setHighlightedIndex:v,n:"1"}),r.a.createElement(b,{data:a,principalComponents:D,setHighlightedComponent:f,highlightedIndex:x,setHighlightedIndex:v,n:"2"}))),r.a.createElement(s.a,{lg:"2"},r.a.createElement(j,{data:a,setData:c,highlightedIndex:x,setHighlightedIndex:v}))))};l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.5610463a.chunk.js.map